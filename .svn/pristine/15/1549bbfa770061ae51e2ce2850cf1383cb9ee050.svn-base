require(["src/components/priceTrend/js/priceTrend-9fb64ce6ba.server.js"],function(e){"use strict";({init:function(){return this.trendInfo(),yf.priceTrend={main:this},this.residenceData="",this.villaData="",this},trendInfo:function(){var t=this,a={city:yf.userInfo.city,comName:yf.param("housingName"),timeSpan:"6",houseType:$("#valuationRequire").find('select[name="estateType"]').eq(0).val()};return $("#residen_name").text(yf.param("housingName")),$("#city_name").text(yf.userInfo.city),$("#district_name").text(yf.param("istrative")),yf.loading("#priceTrend"),"别墅"==a.houseType&&""!=this.villaData&&void 0!=this.villaData?(this.solveDataFn(t.villaData),void yf.removeLoading("#priceTrend")):""!=a.houseType&&"住宅"!=a.houseType||void 0==this.residenceData||""==this.residenceData?void e.getTrendInfo(a).success(function(e){if(200==e.code){if($(".non-detail,#non_trend").addClass("hide"),$("#analysis_body").show(),""==e.data.residentialarea||""==e.data.district||""==e.data.city)return $("#non_trend").removeClass("hide"),$("#analysis_body").hide(),$(".non-detail").removeClass("hide").text("暂无价格分析"),void yf.removeLoading("#priceTrend");t.solveDataFn(e),"别墅"==a.houseType?t.villaData=e:t.residenceData=e}else $("#non_trend").removeClass("hide"),$("#analysis_body").hide(),$(".non-detail").removeClass("hide").text("暂无小区价格走势详情");yf.removeLoading("#priceTrend")}).error(function(){}):(this.solveDataFn(t.residenceData),void yf.removeLoading("#priceTrend"))},solveDataFn:function(e){for(var t=[],a=0;a<e.data.residentialarea.length;a++)t.push(yf.dateStampFn(e.data.residentialarea[a].priceDate).split("-")[1]+"月");this.trendInit(t,e.data.residentialarea,e.data.city,e.data.district,e),this.specificFn(e,a-1)},specificFn:function(e,t){var a=yf.dateStampFn(e.data.residentialarea[t].priceDate).split("-")[0]+"年"+yf.dateStampFn(e.data.residentialarea[t].priceDate).split("-")[1]+"月";$("#trend_date").text(a),$("#residen_price").text(e.data.residentialarea[t].price),this.disPrecFn("#residen_huanbi",e.data.residentialarea[t].trendRatio),this.disPrecFn("#city_huanbi",e.data.city[t].trendRatio),this.disPrecFn("#district_huanbi",e.data.district[t].trendRatio),$("#city_price").text(e.data.city[t].price),$("#district_price").text(e.data.district[t].price)},disPrecFn:function(e,t){t>=0?($(e).removeClass("decline").addClass("rise"),$(e).html('环比上月<strong class="c-red">'+t.toFixed(2)+'%</strong><b class="icon up"></b>')):($(e).removeClass("rise").addClass("decline"),$(e).html('环比上月<strong class="c-green">'+t.toFixed(2)+'%</strong><b class="icon down"></b>'))},extractFn:function(e){for(var t=[],a=0;a<e.length;a++)t.push(e[a].price);return t},trendInit:function(e,t,a,i,n){var r=echarts.init(document.getElementById("bargainTrend")),s=this,d={legend:{data:["小区价格","行政区价格","城市价格"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:e},yAxis:{type:"value",name:"单位：元/㎡"},tooltip:{trigger:"axis",backgroundColor:"rgba(0,0,0,0)",formatter:function(t){var a=t[0].name,i=e.indexOf(a);return s.specificFn(n,i),$("#row_tip").parent().hide(),""}},series:[{name:"小区价格",type:"line",data:s.extractFn(t)},{name:"行政区价格",type:"line",data:s.extractFn(i)},{name:"城市价格",type:"line",data:s.extractFn(a)}]};r.setOption(d),$(window).resize(function(){r.resize()})}}).init()});