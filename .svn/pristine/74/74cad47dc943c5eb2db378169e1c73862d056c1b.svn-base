require(["src/components/referenceCase/js/referenceCase-d68f5f542e.server.js"],function(t){"use strict";({init:function(){var t=this;return yf.referenceCase={main:t},this.legendArr=[],this.seriesArr=[],this.chartGuapai=[],this.chartChengjiao=[],this.getCaseData("挂牌",1,"#guapai_list",150,"casePage"),this.getCaseData("成交","1","#deal_list",150,"donePage"),this},getCaseData:function(e,a,i,n,r){var s=this,o={city:yf.userInfo.city,comName:yf.param("housingName"),caseType:e,timeSpan:"6",pageSize:n||5,pageNo:a||1};yf.loading("#changeCaseBd"),t.getTabelList(o).success(function(t){if(200==t.code){for(var a="",o=t.data.list,c=0;c<o.length;c++)a+=s.concatStrFn(t.data.list[c]);if(null!=i&&$(i).html(a),null!=n){var l=Math.ceil(t.data.list.length/5);"挂牌"==e?yf.referenceCase.guapaiData=t.data:"成交"==e&&(yf.referenceCase.successData=t.data),s.initChartsFn(e,t.data),s.disposeDataFn(1,i,e,t,r),s.pageFn(r,e,t,"getCaseData",i,l)}}else $(i).html('<tr class="text-center"><td colspan="5"><div class="non-row">暂无小区'+e+"案列</div></td></tr>"),s.initChartsFn(e,t.data);setTimeout(function(){yf.removeLoading("#changeCaseBd")},1e3)}).error(function(t){})},disposeDataFn:function(t,e,a,i){var n="",r=(Math.ceil(i.data.list.length/5),5*t-1);r=r>=i.data.list.length?i.data.list.length-1:r;for(var s=5*t-5;s<=r;s++)n+=this.concatStrFn(i.data.list[s]);$(e).html(n)},concatStrFn:function(t){var e=this;return"<tr>\t\t\t\t\t\t<td>"+yf.dateStampFn(t.caseTime)+"</td>\t\t\t\t\t\t<td>"+yf.filterStr(t.area)+"</td>\t\t\t\t\t\t<td>"+yf.filterStr(e.getHouseTypeFn(t.roomType))+"</td>\t\t\t\t\t\t<td>"+yf.filterStr(t.price)+"</td>\t\t\t\t\t\t<td>"+yf.filterStr(t.totalPrice)+"</td>\t\t\t\t\t</tr>"},getHouseTypeFn:function(t){var e;return 1==t?e="一居室":2==t?e="二居室":3==t?e="三居室":4==t?e="四居室":5==t?e="五居室":0!=t&&6!=t&&7!=t&&8!=t&&9!=t||(e="五居室以上"),e},pageFn:function(t,e,a,i,n,r){var s=this;layui.use(["laypage"],function(){layui.laypage.render({elem:t,curr:a.data.pageNum||1,count:a.data.total,layout:["prev","page","next","count"],groups:3,limit:5,jump:function(t,i){!i&&t.curr<r&&s.disposeDataFn(t.curr,n,e,a),!i&&t.curr>=r&&s.getCaseData(e,t.curr,n,null)}})})},initChartsFn:function(t,e,a){var i=this;if("挂牌"==t&&null!=e){for(var n=[],r=0;r<e.list.length;r++)n.push([Number(e.list[r].caseTime),e.list[r].price]);this.chartGuapai=n}if("成交"==t&&null!=e){for(var s=[],r=0;r<e.list.length;r++)s.push([Number(e.list[r].caseTime),e.list[r].price]);this.chartChengjiao=s}this.showChartsFn(i.chartGuapai,i.chartChengjiao,a)},showChartsFn:function(t,e,a){if(0!=e.length||0!=t.length){var i=echarts.init(document.getElementById("caseChart")),n={color:["#93BAEC","#ED9C97"],legend:{y:"top",data:["挂牌","成交"]},grid:{left:"1%",right:"12%",bottom:"3%",containLabel:!0},tooltip:{trigger:"item",formatter:function(t){var e=t.seriesName+"<br/>"+t.marker+yf.dateStampFn(t.data[0])+" "+t.data[1];return"markLine"==t.componentType&&(e="估值结果 : "+a+"元/㎡"),e}},xAxis:{type:"time",splitLine:{show:!1},splitNumber:6},yAxis:{type:"value",name:"单位：元/㎡",splitLine:{show:!0}},series:[{name:"挂牌",type:"scatter",data:t,symbolSize:8},{name:"成交",type:"scatter",data:e,symbolSize:8}]};a&&(n.series[0].markLine={data:[{silent:!0,yAxis:a}],label:{normal:{show:"true",color:"#f00",fontSize:"12",formatter:["{a|估值结果}",a,"元/㎡"].join("\n"),rich:{a:{color:"#000",lineHeight:20,fontSize:"12"}}}},lineStyle:{normal:{color:"rgb(128, 128, 128)",width:"2"}}}),i.setOption(n),$(window).resize(function(){i.resize()})}else $("#caseChart").html('<div class="non-draw">无法绘制小区案例散点图</div>')}}).init();yf.tab({tabId:"#changeCaseHd",contents:"#changeCaseBd",callBack:function(){1==this.index?($("#donePage").show(),$("#casePage").hide(),$("#changeCaseHd li").eq(1).attr("data-load")):($("#casePage").show(),$("#donePage").hide())}})});