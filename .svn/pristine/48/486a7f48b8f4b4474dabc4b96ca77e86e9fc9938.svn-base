layui.define("layer",function(e){"use strict";var i=layui.$,a=layui.layer,t=layui.hint(),n=layui.device(),l=".layui-form",r="layui-this",s="layui-disabled",o=function(){this.config={verify:{required:[/[\S]+/,"必填项不能为空"],phone:[/^1\d{10}$/,"请输入正确的手机号"],email:[/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,"邮箱格式不正确"],url:[/(^#)|(^http(s*):\/\/[^\s]+\.[^\s]+)/,"链接格式不正确"],number:[/^\d+$/,"只能填写数字"],date:[/^(\d{4})[-\/](\d{1}|0\d{1}|1[0-2])([-\/](\d{1}|0\d{1}|[1-2][0-9]|3[0-1]))*$/,"日期格式不正确"],identity:[/(^\d{15}$)|(^\d{17}(x|X|\d)$)/,"请输入正确的身份证号"]}}};o.prototype.set=function(e){var a=this;return i.extend(!0,a.config,e),a},o.prototype.verify=function(e){var a=this;return i.extend(!0,a.config.verify,e),a},o.prototype.on=function(e,i){return layui.onevent.call(this,"form",e,i)},o.prototype.render=function(e,a){var n=this,o=i(l+(a?'[lay-filter="'+a+'"]':"")),u={select:function(){var e,a="layui-form-select",t="layui-select-title",n="layui-select-none",l="",u=function(n,r){i(n.target).parent().hasClass(t)&&!r||(i("."+a).removeClass(a+"ed "+a+"up"),e&&l&&e.val(l)),e=null},c=function(o,c,d){var y=i(this),h=o.find("."+t),v=h.find("input"),p=o.find("dl"),m=p.children("dd");if(!c){var k=function(){var e=o.offset().top+o.outerHeight()+5-f.scrollTop(),i=p.outerHeight();o.addClass(a+"ed"),m.removeClass("layui-hide"),e+i>f.height()&&e>=i&&o.addClass(a+"up")},g=function(e){o.removeClass(a+"ed "+a+"up"),v.blur(),e||b(v.val(),function(e){e&&(l=p.find("."+r).html(),v&&v.val(l))})};h.on("click",function(e){o.hasClass(a+"ed")?g():(u(e,!0),k()),p.find("."+n).remove()}),h.find(".layui-edge").on("click",function(){v.focus()}),v.on("keyup",function(e){9===e.keyCode&&k()}).on("keydown",function(e){var i=e.keyCode;9===i?g():13===i&&e.preventDefault()});var b=function(e,a,t){var n=0;layui.each(m,function(){var a=i(this),l=a.text(),r=-1===l.indexOf(e);(""===e||"blur"===t?e!==l:r)&&n++,"keyup"===t&&a[r?"addClass":"removeClass"]("layui-hide")});var l=n===m.length;return a(l),l};d&&v.on("keyup",function(e){var i=this.value,a=e.keyCode;if(9===a||13===a||37===a||38===a||39===a||40===a)return!1;b(i,function(e){e?p.find("."+n)[0]||p.append('<p class="'+n+'">无匹配项</p>'):p.find("."+n).remove()},"keyup"),""===i&&p.find("."+n).remove()}).on("blur",function(i){e=v,l=p.find("."+r).html(),setTimeout(function(){b(v.val(),function(e){e&&!l&&v.val("")},"blur")},200)}),m.on("click",function(){var e=i(this),a=e.attr("lay-value"),t=y.attr("lay-filter");return!e.hasClass(s)&&(e.hasClass("layui-select-tips")?v.val(""):(v.val(e.text()),e.addClass(r)),e.siblings().removeClass(r),y.val(a).removeClass("layui-form-danger"),layui.event.call(this,"form","select("+t+")",{elem:y[0],value:a,othis:o}),g(!0),!1)}),o.find("dl>dt").on("click",function(e){return!1}),i(document).off("click",u).on("click",u)}};o.find("select").each(function(e,n){var l=i(this),o=l.next("."+a),u=this.disabled,d=n.value,f=i(n.options[n.selectedIndex]),y=n.options[0];if("string"==typeof l.attr("lay-ignore"))return l.show();var h="string"==typeof l.attr("lay-search"),v=y?y.value?"请选择":y.innerHTML||"请选择":"请选择",p=i(['<div class="layui-unselect '+a+(u?" layui-select-disabled":"")+'">','<div class="'+t+'"><input type="text" placeholder="'+v+'" value="'+(d?f.html():"")+'" '+(h?"":"readonly")+' class="layui-input layui-unselect'+(u?" "+s:"")+'">','<i class="layui-edge"></i></div>','<dl class="layui-anim layui-anim-upbit'+(l.find("optgroup")[0]?" layui-select-group":"")+'">'+function(e){var i=[];return layui.each(e,function(e,a){0!==e||a.value?"optgroup"===a.tagName.toLowerCase()?i.push("<dt>"+a.label+"</dt>"):i.push('<dd lay-value="'+a.value+'" class="'+(d===a.value?r:"")+(a.disabled?" "+s:"")+'">'+a.innerHTML+"</dd>"):i.push('<dd lay-value="" class="layui-select-tips">'+(a.innerHTML||"请选择")+"</dd>")}),0===i.length&&i.push('<dd lay-value="" class="'+s+'">没有选项</dd>'),i.join("")}(l.find("*"))+"</dl>","</div>"].join(""));o[0]&&o.remove(),l.after(p),c.call(this,p,u,h)})},checkbox:function(){var e={checkbox:["layui-form-checkbox","layui-form-checked","checkbox"],_switch:["layui-form-switch","layui-form-onswitch","switch"]},a=function(e,a){var t=i(this);e.on("click",function(){var i=t.attr("lay-filter"),n=(t.attr("lay-text")||"").split("|");t[0].disabled||(t[0].checked?(t[0].checked=!1,e.removeClass(a[1]).find("em").text(n[1])):(t[0].checked=!0,e.addClass(a[1]).find("em").text(n[0])),layui.event.call(t[0],"form",a[2]+"("+i+")",{elem:t[0],value:t[0].value,othis:e}))})};o.find("input[type=checkbox]").each(function(t,n){var l=i(this),r=l.attr("lay-skin"),o=(l.attr("lay-text")||"").split("|"),u=this.disabled;"switch"===r&&(r="_"+r);var c=e[r]||e.checkbox;if("string"==typeof l.attr("lay-ignore"))return l.show();var d=l.next("."+c[0]),f=i(['<div class="layui-unselect '+c[0]+(n.checked?" "+c[1]:"")+(u?" layui-checkbox-disbaled "+s:"")+'" lay-skin="'+(r||"")+'">',{_switch:"<em>"+((n.checked?o[0]:o[1])||"")+"</em><i></i>"}[r]||(n.title.replace(/\s/g,"")?"<span>"+n.title+"</span>":"")+'<i class="layui-icon">'+(r?"&#xe605;":"&#xe618;")+"</i>","</div>"].join(""));d[0]&&d.remove(),l.after(f),a.call(this,f,c)})},radio:function(){var e="layui-form-radio",a=["&#xe643;","&#xe63f;"],t=function(t){var n=i(this),r="layui-anim-scaleSpring";t.on("click",function(){var s=n[0].name,o=n.parents(l),u=n.attr("lay-filter"),c=o.find("input[name="+s.replace(/(\.|#|\[|\])/g,"\\$1")+"]");n[0].disabled||(layui.each(c,function(){var t=i(this).next("."+e);this.checked=!1,t.removeClass(e+"ed"),t.find(".layui-icon").removeClass(r).html(a[1])}),n[0].checked=!0,t.addClass(e+"ed"),t.find(".layui-icon").addClass(r).html(a[0]),layui.event.call(n[0],"form","radio("+u+")",{elem:n[0],value:n[0].value,othis:t}))})};o.find("input[type=radio]").each(function(n,l){var r=i(this),o=r.next("."+e),u=this.disabled;if("string"==typeof r.attr("lay-ignore"))return r.show();var c=i(['<div class="layui-unselect '+e+(l.checked?" "+e+"ed":"")+(u?" layui-radio-disbaled "+s:"")+'">','<i class="layui-anim layui-icon">'+a[l.checked?0:1]+"</i>","<span>"+(l.title||"未命名")+"</span>","</div>"].join(""));o[0]&&o.remove(),r.after(c),t.call(this,c)})}};return e?u[e]?u[e]():t.error("不支持的"+e+"表单渲染"):layui.each(u,function(e,i){i()}),n};var u=function(){var e=i(this),t=c.config.verify,r=null,s={},o=e.parents(l),u=o.find("*[lay-verify]"),d=e.parents("form")[0],f=o.find("input,select,textarea"),y=e.attr("lay-filter");return layui.each(u,function(e,l){var s=i(this),o=s.attr("lay-verify").split("|"),u="",c=s.val();if(s.removeClass("layui-form-danger"),layui.each(o,function(e,i){var o="function"==typeof t[i];if(t[i]&&(o?u=t[i](c,l):!t[i][0].test(c)))return a.msg(u||t[i][1],{icon:5,shift:6}),n.android||n.ios||l.focus(),s.addClass("layui-form-danger"),r=!0}),r)return r}),!r&&(layui.each(f,function(e,i){i.name&&(/^checkbox|radio$/.test(i.type)&&!i.checked||(s[i.name]=i.value))}),layui.event.call(this,"form","submit("+y+")",{elem:this,form:d,field:s}))},c=new o,d=i(document),f=i(window);c.render(),d.on("reset",l,function(){var e=i(this).attr("lay-filter");setTimeout(function(){c.render(null,e)},50)}),d.on("submit",l,u).on("click","*[lay-submit]",u),e("form",c)});