require(["src/user/auditPriceRecord/js/auditPriceRecord-358fcc20c3.server.js"],function(t){"use strict";({init:function(){return this.startDate="",this.endDate="",this.resTabelFn(),this.searchFn(),this.resetFn(),this.dateInitFn(),this.buildPriceFn(),this.areaDisPoseFn(),layer.closeAll(),yf.scroll({elmId:"#his_evaluate"}),this},resTabelFn:function(a){var e=this,i={curCity:yf.userInfo.city,queryCity:yf.replaceHtml($("#local_city").val()),comName:yf.replaceHtml($("#com_name").val()),minArea:$("#min_area").val(),maxArea:$("#max_area").val(),minDate:yf.replaceHtml($("#begin_date").val()),maxDate:yf.replaceHtml($("#end_date").val()),pageNo:a||1,pageSize:10},n=layer.load(2,{shade:[.1,"#000"]});t.getTableList(i).success(function(t){if(layer.close(n),200==t.code){var a="";if(t.data.list.length>0){for(var i=0;i<t.data.list.length;i++)a+='<tr>\t\t\t\t\t\t\t\t <td width="80" class="text-center">'+yf.filterStr(t.data.list[i].guJiaChengShi)+'</td>\t\t\t\t\t\t\t\t <td width="260">\t\t\t\t\t\t\t\t\t <p>'+yf.filterStr(t.data.list[i].guJiaDuiXiang)+"</p>\t\t\t\t\t\t\t\t\t <p>"+yf.filterStr(t.data.list[i].tiJiaoShiJian)+'</p>\t\t\t\t\t\t\t\t </td>\t\t\t\t\t\t\t\t <td width="160">\t\t\t\t\t\t\t\t\t <p>审核总价：<span class="c-red">'+yf.filterStr(t.data.list[i].shenHeZongJia)+'</span>万元</p>\t\t\t\t\t\t\t\t\t <p>审核单价：<span class="c-red">'+yf.filterStr(t.data.list[i].shenHeDanJia)+'</span>元/㎡</p>\t\t\t\t\t\t\t\t </td>\t\t\t\t\t\t\t\t <td width="120">\t\t\t\t\t\t\t\t\t <p>面积：<span class="c-red">'+yf.filterStr(t.data.list[i].jianZhuMianJi)+"</span>㎡</p>\t\t\t\t\t\t\t\t\t <p>朝向：<span>"+yf.filterStr(t.data.list[i].fangWuChaoXiang)+'</span></p>\t\t\t\t\t\t\t\t </td>\t\t\t\t\t\t\t\t <td width="120">\t\t\t\t\t\t\t\t\t <p>总楼层：'+yf.filterStr(t.data.list[i].zongLouCeng)+"层</p>\t\t\t\t\t\t\t\t\t <p>所在层："+yf.filterStr(t.data.list[i].suoZaiLouCeng)+'层</p>\t\t\t\t\t\t\t\t </td>\t\t\t\t\t\t\t\t <td width="80"><a class="c-blue" href="./chatServer.html?bussinessID='+t.data.list[i].bussinessID+"&recordID="+t.data.list[i].id+'&type=logs" target="_blank">',a+=t.data.list[i].weiDuXiaoXiTiaoShu>0?'新消息<span class="msg-red-point">'+(t.data.list[i].weiDuXiaoXiTiaoShu>99?"99+":t.data.list[i].weiDuXiaoXiTiaoShu)+"</span>":"消息记录",a+="</a></td></tr>";$("#his_detatil").html(a),$("#his_detatil tr:odd").css("background","#f9f9f9"),e.detailsFn(),e.pageFn("queryLogsPage",t.data.pageNum,t.data.total,"resTabelFn")}else $("#his_detatil").html('<tr class="text-center"><td colspan="6">暂无数据</td></tr>')}else $("#queryLogsPage").html(""),$("#his_detatil").html('<tr class="text-center"><td colspan="6">暂无数据</td></tr>'),403==t.code&&($("#detail_search,#detail_reset,#built_price").addClass("layui-btn-disabled"),layer.msg(t.msg,{time:3e3},function(){window.location.href="#/layout?page=intelligentSearch"}))}).error(function(t){layer.close(n)})},detailsFn:function(){$("#his_detatil tr td").find("a").unbind("click").bind("click",function(){-1!=$(this).text().indexOf("新消息")&&$(this).text("消息记录")})},searchFn:function(){var t=this,a=/[~#^$@%&！!*]/;$("#detail_search").click(function(){if(!$("#detail_search").hasClass("layui-btn-disabled")){var e=!0,i=!0,n=$("#min_area").val(),r=$("#max_area").val();""!=$("#com_name").val()&&a.test($("#com_name").val())?layer.tips("核价对象不能有特殊符号","#com_name",{tips:[2,"#666"]}):""!=$("#local_city").val()&&a.test($("#local_city").val())?layer.tips("城市不能有特殊符号","#local_city",{tips:[2,"#666"]}):(""!=n&&(e=t.limitAreaFn("#min_area")),""!=r&&(i=t.limitAreaFn("#max_area")),e&&i&&(""!=n&&""!=r&&Number(n)>Number(r)&&($("#min_area").val(r),$("#max_area").val(n)),t.resTabelFn()))}})},resetFn:function(){var t=this;$("#detail_reset").click(function(){$("#detail_reset").hasClass("layui-btn-disabled")||($("#detail_record").find("input").val(""),t.endDate.config.min.year=t.startDate.config.min.year,t.endDate.config.min.month=t.startDate.config.min.month,t.endDate.config.min.date=t.startDate.config.min.date,t.startDate.config.max.year=t.endDate.config.max.year,t.startDate.config.max.month=t.endDate.config.max.month,t.startDate.config.max.date=t.endDate.config.max.date,t.resTabelFn(),yf.placeholder())})},pageFn:function(t,a,e,i){var n=this;this.layPage?n.page(t,a,e,i):layui.use(["laypage"],function(){n.layPage=layui.laypage,n.page(t,a,e,i)})},page:function(t,a,e,i){var n=this;this.layPage.render({elem:t,curr:a||1,count:e,limit:10,layout:["prev","page","next","skip","count"],jump:function(t,a){a||n[i](t.curr)}})},dateInitFn:function(){var t=this;layui.use(["laydate"],function(){t.startDate=layui.laydate.render({elem:"#begin_date",max:0,done:function(a,e){""!==a?(t.endDate.config.min.year=e.year,t.endDate.config.min.month=e.month-1,t.endDate.config.min.date=e.date):(t.endDate.config.min.year=t.startDate.config.min.year,t.endDate.config.min.month=t.startDate.config.min.month,t.endDate.config.min.date=t.startDate.config.min.date)}}),t.endDate=layui.laydate.render({elem:"#end_date",max:0,done:function(a,e){""!==a?(t.startDate.config.max.year=e.year,t.startDate.config.max.month=e.month-1,t.startDate.config.max.date=e.date):(t.startDate.config.max.year=t.endDate.config.max.year,t.startDate.config.max.month=t.endDate.config.max.month,t.startDate.config.max.date=t.endDate.config.max.date)}})})},buildPriceFn:function(){$("#built_price").unbind("click").bind("click",function(){$("#built_price").hasClass("layui-btn-disabled")||yf.path.load("#auditPriceRecord",{controllerUrl:"src/components/artificialNuclearValence/js/artificialNuclearValence-e5e5693ff8.controller.js",templateUrl:"src/components/artificialNuclearValence/artificialNuclearValence.html",reload:!0})})},areaDisPoseFn:function(){var t=this;$("#min_area").keyup(function(){t.limitAreaFn("#min_area")}),$("#max_area").keyup(function(){t.limitAreaFn("#max_area")})},limitAreaFn:function(t){var a=$(t).val().replace(/\s+/g,""),e=!0;return""==a?e:!/^(([1-9]\d{0,3}(\.\d{0,2})?)|9999)$/.test(a)||a>9998.99?($(t).val(a.length>=4?a.substr(0,4):a.substr(a.length-1)),layer.tips("请输入面积为1~9998.99，只留两位小数！",t,{tips:[2,"#666"]}),e=!1):e}}).init()});