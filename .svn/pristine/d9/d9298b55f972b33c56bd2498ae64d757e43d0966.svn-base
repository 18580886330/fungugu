~function(t){t.yf={setItem:function(t,e){return localStorage.setItem(t,encodeURIComponent("object"==typeof e?JSON.stringify(e):String(e)))},getItem:function(t){return decodeURIComponent(localStorage.getItem(t)).match(/\{/),JSON.parse(decodeURIComponent(localStorage.getItem(t)))},removeItem:function(t){return!!localStorage.getItem(t)&&!localStorage.removeItem(t)},isIe:function(){return navigator.userAgent.toLowerCase().indexOf("msie")>=0},jsonParse:function(t){return this.isIe()?JSON.parse(decodeURIComponent(JSON.stringify(t))):t}},yf.userInfo=yf.getItem("userInfo"),$("#userName").append(yf.userInfo.userName),$("#cityLink").find(".name").text(yf.userInfo.city),$.ajax({type:"get",url:"/api/v1/moduleAuthority/"+encodeURIComponent(yf.userInfo.city),dataType:"json",async:!1,success:function(t){if(!t||!t.data)return layer.msg(t.msg);yf.layoutData=yf.jsonParse(t.data)},error:function(t){}}),yf.placeholder=function(){function t(t){return(t=t||window.event).target||t.srcElement}function e(e){var i=t(e);if(i&&("INPUT"==i.tagName||"TEXTAREA"==i.tagName)){var n=i.__emptyHintEl;n&&(i.value?n.style.display="none":n.style.display="")}}function i(e){var i=t(e);if(i&&("INPUT"==i.tagName||"TEXTAREA"==i.tagName)){var n=i.__emptyHintEl;n&&(n.style.display="none")}}if(!("placeholder"in document.createElement("input"))){document.addEventListener?(document.addEventListener("focus",i,!0),document.addEventListener("blur",e,!0)):(document.attachEvent("onfocusin",i),document.attachEvent("onfocusout",e));for(var n=[document.getElementsByTagName("input"),document.getElementsByTagName("textarea")],o=0;o<2;o++)for(var a=n[o],s=0;s<a.length;s++){var r=a[s],l=r.getAttribute("placeholder"),c=r.__emptyHintEl;c&&r.value?c.style.display="none":c&&!r.value&&(c.style.display="block"),l&&!c&&((c=document.createElement("span")).innerHTML=l,c.className="emptyhint",c.onclick=function(t){return function(){try{t.focus()}catch(t){}}}(r),r.parentNode.style.position="relative",r.value&&(c.style.display="none"),r.parentNode.appendChild(c),r.__emptyHintEl=c)}}},Array.prototype.indexOf=function(t){for(var e=0;e<this.length;e++)if(this[e]==t)return e;return-1},Array.prototype.remove=function(t){var e=this.indexOf(t);return e>-1&&this.splice(e,1),this},Array.prototype.unique=function(){this.sort();for(var t=[this[0]],e=1;e<this.length;e++)this[e]!==t[t.length-1]&&t.push(this[e]);return t};var e=function(){this.name=""};e.prototype.init=function(t,e){var i=this,n=t.split("/"),o=n[n.length-1].substring(n[n.length-1].lastIndexOf("."));if(this.fileName=n[n.length-1].substring(0,n[n.length-1].lastIndexOf(".")),".css"==o)(a=document.createElement("link")).setAttribute("rel","stylesheet"),a.setAttribute("type","text/css"),a.setAttribute("href",t),a.setAttribute("data-href",this.fileName),$("link[data-href]").each(function(t,e){$(e).attr("data-href")==i.fileName&&$($("link[data-href='"+i.fileName+"']")).remove()}),document.getElementsByTagName("head")[0].appendChild(a);else if(".js"==o){var a=document.createElement("script");a.setAttribute("charset","utf-8"),a.setAttribute("type","text/javascript"),a.setAttribute("src",t),a.setAttribute("data-href",this.fileName),$("script[data-href]").each(function(t,e){$(e).attr("data-href")==i.fileName&&$($("script[data-href='"+i.fileName+"']")).remove()}),document.getElementsByTagName("head")[0].appendChild(a)}e&&e()};var i=function(){var t=$("#header"),e=$("#navTree"),i=t.find("a[data-href]"),n=e.find("a[data-href]"),o=[];i.each(function(t,e){o.push($(e))}),n.each(function(t,e){o.push($(e))});for(var a=0;a<o.length;a++)try{var s=$(o).eq(a)[0].data().href;if($(o).eq(a)[0].removeClass("active"),location.href.match(s)){$(o).eq(a)[0].addClass("active");continue}}catch(t){console.log(t)}};yf.matchTitle=function(t){var e={houseValuation:"房产估值",layout:"房产估值",queryLogs:"查询记录"};document.title=e[t]},yf.matchRouter=function(t){return t?t.match(/.*\/([^?]*)/)[1]:location.href.match(/.*\/([^?]*)/)[1]};var n={version:"1.0.0",map:function(t){var t=t.split("?")[0];return n.routes.defined.hasOwnProperty(t)?n.routes.defined[t]:new n.core.route(t)},load:function(t,e){if(e.reload||!$(t).attr("data-refresh")){var i=document.createElement("script");return i.type="type/javascript",i.src=e.controllerUrl,$(t).attr("data-refresh","true").html($.ajax({url:e.templateUrl,async:!1}).responseText).append(i),this}},root:function(t){n.routes.root=t},rescue:function(t){n.routes.rescue=t},history:{initial:{},pushState:function(t,e,i){n.history.supported?n.dispatch(i)&&history.pushState(t,e,i):n.history.fallback&&(window.location.hash="#"+i)},popState:function(t){var e=!n.history.initial.popped&&location.href==n.history.initial.URL;n.history.initial.popped=!0,e||n.dispatch(document.location.pathname)},listen:function(t){if(n.history.supported=!(!window.history||!window.history.pushState),n.history.fallback=t,n.history.supported)n.history.initial.popped="state"in window.history,n.history.initial.URL=location.href,window.onpopstate=n.history.popState;else if(n.history.fallback){for(route in n.routes.defined)"#"!=route.charAt(0)&&(n.routes.defined["#"+route]=n.routes.defined[route],n.routes.defined["#"+route].path="#"+route);n.listen()}}},match:function(t,e){var i,o,a,s,r,l={},c=null;for(c in n.routes.defined)if(null!==c&&void 0!==c)for(i=(c=n.routes.defined[c]).partition(),s=0;s<i.length;s++){if(o=i[s],r=t,o.search(/:/)>0)for(a=0;a<o.split("/").length;a++)a<r.split("/").length&&":"===o.split("/")[a].charAt(0)&&(l[o.split("/")[a].replace(/:/,"")]=r.split("/")[a],r=r.replace(r.split("/")[a],o.split("/")[a]));if(o===r.split("?")[0])return e&&(c.params=l),c}return null},dispatch:function(t){var e,i;if(n.routes.current!==t){if(n.routes.previous=n.routes.current,n.routes.current=t,i=n.match(t,!0),n.routes.previous&&null!==(e=n.match(n.routes.previous))&&null!==e.do_exit&&e.do_exit(),null!==i)return i.run(),!0;null!==n.routes.rescue&&n.routes.rescue()}},listen:function(){var t=function(){n.dispatch(location.hash)};""===location.hash&&null!==n.routes.root&&(location.hash=n.routes.root),"onhashchange"in window&&(!document.documentMode||document.documentMode>=8)?window.onhashchange=t:setInterval(t,50),""!==location.hash&&n.dispatch(location.hash)},core:{route:function(t){this.path=t,this.action=null,this.do_enter=[],this.do_exit=null,this.params={},n.routes.defined[t]=this}},routes:{current:null,root:null,rescue:null,previous:null,defined:{}}};n.core.route.prototype={to:function(t){return this.action=function(){t&&($("div[show-view]").html($.ajax({url:t.templateUrl,async:!1}).responseText),yf.matchTitle(yf.matchRouter()),yf.loadFile(t.controllerUrl),yf.runNavActive(),yf.mainScroll.init(),yf.placeholder())},this},enter:function(t){return t instanceof Array?this.do_enter=this.do_enter.concat(t):this.do_enter.push(t),this},exit:function(t){return this.do_exit=t,this},partition:function(){for(var t,e,i=[],n=[],o=/\(([^}]+?)\)/g;t=o.exec(this.path);)i.push(t[1]);for(n.push(this.path.split("(")[0]),e=0;e<i.length;e++)n.push(n[n.length-1]+i[e]);return n},run:function(){var t,e=!1;if(n.routes.defined[this.path].hasOwnProperty("do_enter")&&n.routes.defined[this.path].do_enter.length>0)for(t=0;t<n.routes.defined[this.path].do_enter.length;t++)if(!1===n.routes.defined[this.path].do_enter[t].apply(this,[])){e=!0;break}e||n.routes.defined[this.path].action()}};var o=function(t){var e=RegExp("[?&]"+t+"=([^&]*)").exec(window.location.href);return e&&decodeURIComponent(e[1].replace(/\+/g," "))},a=function(){this.setings={timer:null,node:"",showNode:"",callBack:function(){}}};a.prototype={init:function(t){$.extend(this.setings,t||{});var e=this,i=this.setings.node,n=this.setings.showNode;this.setings.callBack;i.each(function(t,i){$(i).hover(function(){$(this).next(n).length&&e.show(n)},function(){$(this).next(n).length&&e.hide(n)})}),n.hover(function(){e.show(n)},function(){e.hide(n)})},show:function(t,e){this.setings.node.addClass("on"),this.setings.showNode.addClass("on"),this.timer&&clearTimeout(this.timer),t.stop(!0,!0).show(),this.setings.callBack&&this.setings.callBack()},hide:function(t){var e=this;this.timer=setTimeout(function(){t.stop(!0,!0).hide(),e.setings.node.removeClass("on"),e.setings.showNode.removeClass("on"),clearTimeout(this.timer)},200)}};var s=function(){this.setings={tabId:"",contents:"",offset:""},this.setings.tabId};s.prototype.init=function(t,e){var i=this,e=e||0;if($.extend(this.setings,t||{}),this.setings.index=e||0,$(this.setings.tabId)){if(this.childNode=$(this.setings.tabId).children(),this.childPanel=$(this.setings.contents).children(),$(this.childNode).each(function(t,e){$(e).attr("data-id",t),$(e).unbind().bind("click",function(){i.changeTab($(this),t,$(this).text())})}),this.childNode.hasClass("active")){var n=$(this.setings.tabId).children(".active");i.changeTab($(n),$(n).attr("data-id"),$(n).text())}else this.childNode.eq(e).addClass("active").siblings().removeClass("active"),this.childPanel.eq(e).show().siblings().hide(),this.setings.callBack&&this.setings.callBack();return this.setings.text=$(this.childNode).eq(e).text(),this.setings}},s.prototype.changeTab=function(t,e,i){var n=this;$(this.childNode).removeClass("active"),$(t).addClass("active"),"opacity"==n.setings.offset?$(this.childPanel).eq(e).removeClass("none").show().siblings().addClass("none").hide():$(this.childPanel).eq(e).show().siblings().hide(),this.setings.index=e,this.setings.text=i,this.setings.callBack&&this.setings.callBack()},yf.mainScroll=function(){var t="";return{init:function(){return this.oContentBody=$("div[show-view]"),this.oScrollWamp=$("#scrollWamp"),this.resize(),this.scroll(),this},resize:function(){var e=this;t=$(window).height()-$(".header").height(),e.oContentBody.css({height:t}),$(window).width()<=1200&&(e.oContentBody.css("width","990px"),$("body").addClass("hidden")),$(window).resize(function(){yf.autopromptingAlign(),t=$(window).height()-$(".header").height(),e.oContentBody.css({width:"auto",height:t}),e.oScrollWamp.css({height:t}),$("body").removeClass("hidden"),$(window).width()<=1200&&(e.oContentBody.css("width","990px"),$("body").addClass("hidden"))})},scroll:function(){this.oScrollWamp.length&&this.oScrollWamp.mCustomScrollbar({setHeight:t,scrollInertia:180,theme:"minimal-dark",axis:"y",alwaysShowScrollbar:2,callbacks:{whileScrolling:function(){if(yf.autopromptingAlign(),$('div[data-type="loading"]').is(":visible")){var t=function(){$('div[data-type="loading"]').each(function(t,e){var i=$(e).attr("data-id"),n=$("#"+i);$(e).css({top:n.offset().top,left:n.offset().left,width:n.outerWidth(),height:n.outerHeight()})})};t(),$(window).resize(t)}}}})},stopMainScroll:function(){this.oScrollWamp.mCustomScrollbar("disable")},updateMainScroll:function(){this.oScrollWamp.mCustomScrollbar("update")}}}(),yf.autopromptingAlign=function(){if($('div[data-type="autoprompting"]').is(":visible")){var t=$('div[data-type="autoprompting"]'),e=$("#"+t.data().elmid);t.css({top:e.offset().top+e.height()+5+"px",left:e.offset().left})}},yf.tabInit=function(t,e){for(var i=$(t),n=i.find(".layui-tab-title"),o=i.find(".layui-tab-content"),a="",s="",r=0;r<e.length;r++)0==r?(a+='<li data-module="'+e[r].nameEn+'" class="layui-this">'+e[r].nameZn+"</li>",s+='<div id="'+e[r].nameEn+'" class="layui-tab-item layui-show"><div class="loading"><img src="src/content/js/third/layer/css/modules/layer/default/loading-2.gif">正在加载...</div></div>'):(a+='<li data-module="'+e[r].nameEn+'">'+e[r].nameZn+"</li>",s+='<div id="'+e[r].nameEn+'" class="layui-tab-item"><div class="loading"><img src="src/content/js/third/layer/css/modules/layer/default/loading-2.gif">正在加载...</div></div>');n.html(a),o.html(s)},yf.loading=function(t){if(!$('div[data-id="'+$(t).attr("id")+'"]').length){var t=$(t),e=$('<div class="loading" data-type="loading" data-id="'+t.attr("id")+'" style="position:absolute;width:100%;height:100%;left:0;top:0;line-height:100%;background-color:#fff;background-color:rgba(255,255,255,.5);filter:alpha(opacity=50);z-index: 99999999;">        <div style="position:absolute;top:50%;width: 100%;line-height: 25px;color:#333">        <img src="src/content/js/third/layer/css/modules/layer/default/loading-2.gif" class="mCS_img_loaded">正在加载...</div></div>');e.css({width:t.outerWidth(),height:t.outerHeight()}),$(t).addClass("pv").append(e)}},yf.removeLoading=function(t){$(t).removeClass("pv"),$('div[data-id="'+$(t).attr("id")+'"]').remove()},yf.msg=function(t){return"200"!=t.code?!layer.msg(t.msg):1},yf.matchModule=function(t,e){try{for(var i=[],n=0;n<t.length;n++)for(var o=0;o<yf.layoutData.length;o++)-1!=t[n].indexOf(yf.layoutData[o].nameEn)&&yf.layoutData[o].cityAuthority==yf.userInfo.city&&i.push(yf.layoutData[o])}catch(t){console.log(t)}return e?e(i):i};var r=function(t){var e=$(t.elmId);e.mCustomScrollbar("destroy"),e.mCustomScrollbar({setHeight:t.height||e.outerHeight(),scrollInertia:180,theme:"minimal-dark",axis:"y"})},l=function(t){return t.replace(/<.[^<>]*?>|\s/g,"")},c=function(t){return"0"==t?t:(void 0!=t&&null!=t&&""!=t||(t="--"),t)},h=function(t){if("--"==t)return t;var e=new Date(parseInt(t));return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()};yf.updataCity=function(t){yf.setItem("userInfo",{city:t,userName:yf.userInfo.userName}),yf.userInfo.city=t,$("#cityLink").find(".name").text(t)},yf.limitStr=function(t,e,i){var n,o=$(t),a=$(e);a.text(i-o.val().length),o.on("keyup",function(){n=$(this).val(),rLen=i-n.length,rLen<=0&&(o.val(o.val().substring(0,i)),rLen=0),a.text(rLen)})},t.onload=function(){yf.menuDown({node:$(".drop-nav").find(".link"),showNode:$(".drop-nav").find(".drop-nav-child")})};var d,u,f;yf.path=n,yf.tab=function(t,e){return d?d.init(t,e):(d=new s).init(t,e)},yf.loadFile=function(t,i){return u?u.init(t,i):(u=new e).init(t,i)},yf.menuDown=function(t){return f?f.init(t):(f=new a).init(t)},yf.param=function(t){return o(t)},yf.runNavActive=function(){return i()},yf.stopMainScroll=function(){return yf.mainScroll.stopMainScroll()},yf.updateMainScroll=function(){return yf.mainScroll.updateMainScroll()},yf.scroll=function(t){return r(t)},yf.replaceHtml=function(t){return l(t)},yf.filterStr=function(t){return c(t)},yf.dateStampFn=function(t,e){return h(t)},yf}(window);