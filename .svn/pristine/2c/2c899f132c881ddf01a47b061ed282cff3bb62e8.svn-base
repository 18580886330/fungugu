!function(t){t.tablesort=function(e,s){var o=this;this.$table=e,this.$thead=this.$table.find("thead"),this.settings=t.extend({},t.tablesort.defaults,s),this.$sortCells=this.$thead.length>0?this.$thead.find("th:not(.no-sort)"):this.$table.find("th:not(.no-sort)"),this.$sortCells.on("click.tablesort",function(){o.sort(t(this))}),this.index=null,this.$th=null,this.direction=null},t.tablesort.prototype={sort:function(e,s){var o=new Date,i=this,n=(this.$table.context.id,t("table.sortTableHead"));rowsContainer=n.find("tbody").length>0?n.find("tbody"):n,rows=rowsContainer.find("tr").has("td, th"),cells=rows.find(":nth-child("+(e.index()+1)+")").filter("td, th"),sortBy=e.data().sortBy,sortedMap=[],sortField=e.data().field;var r=cells.map(function(s,o){return sortBy?"function"==typeof sortBy?sortBy(t(e),t(o),i):sortBy:null!=t(this).data().sortValue?t(this).data().sortValue:t(this).text()});0!==r.length&&(this.index!==e.index()?(this.direction="asc",this.index=e.index()):this.direction="asc"!==s&&"desc"!==s?"asc"===this.direction?"desc":"asc":s,s="asc"==this.direction?1:-1,i.$table.trigger("tablesort:start",[i]),i.log("Sorting by "+this.index+" "+this.direction),i.$table.css("display"),setTimeout(function(){i.$sortCells.removeClass(i.settings.asc+" "+i.settings.desc);for(var n=0,a=r.length;n<a;n++)sortedMap.push({index:n,cell:cells[n],row:rows[n],value:/^(-?\d+\.?\,*\d*)+$/g.test(r[n])?parseFloat(r[n]):r[n]});sortedMap.sort(function(t,e){return i.settings.compare(t.value,e.value)*s}),t.each(sortedMap,function(t,e){rowsContainer.append(e.row)}),e.addClass(i.settings[i.direction]),i.log("Sort finished in "+((new Date).getTime()-o.getTime())+"ms"),i.$table.trigger("tablesort:complete",[i]),i.$table.css("display"),i.settings.callBack&&i.settings.callBack({sortField:sortField,direction:i.direction})},r.length>2e3?200:10))},log:function(e){(t.tablesort.DEBUG||this.settings.debug)&&console&&console.log&&console.log("[tablesort] "+e)},destroy:function(){return this.$sortCells.off("click.tablesort"),this.$table.data("tablesort",null),null}},t.tablesort.DEBUG=!1,t.tablesort.defaults={debug:t.tablesort.DEBUG,asc:"sorted ascending",desc:"sorted descending",compare:function(t,e){return t>e?1:t<e?-1:0}},t.fn.tablesort=function(e){var s,o;return this.each(function(){s=t(this),(o=s.data("tablesort"))&&o.destroy(),s.data("tablesort",new t.tablesort(s,e))})}}(window.Zepto||window.jQuery);